<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Simple Shooter Game</title>
<style>
  body { margin:0; background:#000; overflow:hidden; display:flex; flex-direction:column; align-items:center; }
  canvas { background:#111; border:3px solid #0f0; border-radius:6px; margin-top:10px; }
  #buttons { display:flex; justify-content:center; gap:15px; margin:10px; }
  .btn { width:70px; height:70px; border:none; border-radius:50%; background:#040; color:#0f0; font-size:28px; }
  #info { color:#0f0; font-family:sans-serif; margin-top:5px; }
</style>
</head>
<body>
<h2 style="color:#0f0;font-family:sans-serif;margin-top:10px;">Space Shooter</h2>
<div id="info">Score: <span id="score">0</span> | Lives: <span id="lives">3</span></div>
<canvas id="game" width="480" height="600"></canvas>

<div id="buttons">
  <button class="btn" id="left">◀</button>
  <button class="btn" id="shoot">●</button>
  <button class="btn" id="right">▶</button>
</div>

<script>
const canvas=document.getElementById('game');
const ctx=canvas.getContext('2d');
const scoreEl=document.getElementById('score');
const livesEl=document.getElementById('lives');

const leftBtn=document.getElementById('left');
const rightBtn=document.getElementById('right');
const shootBtn=document.getElementById('shoot');

let keys={},touch={left:false,right:false,shoot:false};
let player,bullets,enemies,score,lives,running,enemyTimer;

function reset(){
  player={x:canvas.width/2-20,y:canvas.height-40,w:40,h:20,speed:250,reload:0};
  bullets=[];
  enemies=[];
  score=0;
  lives=3;
  running=true;
  enemyTimer=0;
  scoreEl.textContent=score;
  livesEl.textContent=lives;
}

function spawnEnemy(){
  const x=Math.random()*(canvas.width-30);
  enemies.push({x,y:0,w:30,h:20,speed:80});
}

function rectsOverlap(a,b){return !(a.x+a.w<b.x||a.x>b.x+b.w||a.y+a.h<b.y||a.y>b.y+b.h);}

function update(dt){
  if(!running)return;
  // player move
  if(keys.ArrowLeft||touch.left)player.x-=player.speed*dt;
  if(keys.ArrowRight||touch.right)player.x+=player.speed*dt;
  player.x=Math.max(0,Math.min(canvas.width-player.w,player.x));

  // shooting
  if(player.reload>0)player.reload-=dt;
  if((keys[" "]||touch.shoot)&&player.reload<=0){
    bullets.push({x:player.x+player.w/2-2,y:player.y,w:4,h:10,speed:400});
    player.reload=0.25;
  }

  // bullets move
  for(let i=bullets.length-1;i>=0;i--){
    bullets[i].y-=bullets[i].speed*dt;
    if(bullets[i].y<-10)bullets.splice(i,1);
  }

  // enemies move
  enemyTimer-=dt;
  if(enemyTimer<=0){enemyTimer=0.8;spawnEnemy();}
  for(let e of enemies)e.y+=e.speed*dt;
  for(let i=enemies.length-1;i>=0;i--){
    const e=enemies[i];
    if(e.y>canvas.height){enemies.splice(i,1);lives--;livesEl.textContent=lives;if(lives<=0){running=false;alert("Game Over! Score:"+score);}}
  }

  // collisions
  for(let i=enemies.length-1;i>=0;i--){
    const e=enemies[i];
    for(let j=bullets.length-1;j>=0;j--){
      const b=bullets[j];
      if(rectsOverlap(e,b)){
        enemies.splice(i,1);
        bullets.splice(j,1);
        score+=10;
        scoreEl.textContent=score;
        break;
      }
    }
  }
}

function render(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="#0f0";
  ctx.fillRect(player.x,player.y,player.w,player.h);
  ctx.fillStyle="#0ff";
  for(let b of bullets)ctx.fillRect(b.x,b.y,b.w,b.h);
  ctx.fillStyle="#f00";
  for(let e of enemies)ctx.fillRect(e.x,e.y,e.w,e.h);
}

let last=performance.now();
function loop(t){
  const dt=Math.min(0.05,(t-last)/1000);
  last=t;
  update(dt);
  render();
  requestAnimationFrame(loop);
}

// keyboard
window.addEventListener("keydown",e=>keys[e.key]=true);
window.addEventListener("keyup",e=>keys[e.key]=false);

// buttons
function hold(btn,prop){
  btn.onmousedown=()=>touch[prop]=true;
  btn.onmouseup=()=>touch[prop]=false;
  btn.ontouchstart=e=>{e.preventDefault();touch[prop]=true};
  btn.ontouchend=e=>{e.preventDefault();touch[prop]=false};
}
hold(leftBtn,"left");
hold(rightBtn,"right");
hold(shootBtn,"shoot");

reset();
requestAnimationFrame(loop);
</script>
</body>
</html>
