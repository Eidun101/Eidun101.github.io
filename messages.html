<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Chat with Eidun</title>
<style>
body { font-family: Arial; background: #0d1117; color: white; padding: 20px; }
#messages { max-height: 70vh; overflow-y: auto; padding: 10px; background: #111; border-radius: 10px; }
.msg { padding: 10px; margin: 10px 0; border-radius: 8px; }
.user { background: #2563eb; text-align: right; }
.me { background: #1f2937; }
#sendBox { margin-top: 20px; display: flex; }
input { flex: 1; padding: 10px; border-radius: 6px; border: none; }
button { margin-left: 10px; padding: 10px; border: none; background: #5eead4; font-weight: bold; border-radius: 6px; }
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
import { getDatabase, ref, push, onChildAdded } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAGAnCBG3vNE95AFe-cXIsYZinyMD_b5D4",
  authDomain: "anything-2aa90.firebaseapp.com",
  databaseURL: "https://anything-2aa90-default-rtdb.firebaseio.com",
  projectId: "anything-2aa90",
  storageBucket: "anything-2aa90.firebasestorage.app",
  messagingSenderId: "20640591118",
  appId: "1:20640591118:web:4788574011fd3ab23cfb5f",
  measurementId: "G-VNQS56CECM"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const messagesRef = ref(db, "messages");

const messagesDiv = document.getElementById("messages");
const input = document.getElementById("msgInput");

onChildAdded(messagesRef, (snapshot) => {
  const data = snapshot.val();
  const div = document.createElement("div");
  div.className = "msg " + (data.sender === "user" ? "user" : "me");
  div.textContent = data.text;
  messagesDiv.appendChild(div);
  messagesDiv.scrollTop = messagesDiv.scrollHeight;
});

window.sendMessage = function () {
  const text = input.value.trim();
  if (!text) return;

  push(messagesRef, {
    sender: "user",
    text: text,
    time: Date.now()
  });

  input.value = "";
};
</script>
</head>
<body>
<h1>Chat with Eidun</h1>
<div id="messages"></div>
<div id="sendBox">
  <input id="msgInput" placeholder="Type a message...">
  <button onclick="sendMessage()">Send</button>
</div>
</body>
</html>
